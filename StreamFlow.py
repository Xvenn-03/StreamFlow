#!/usr/bin/env python3
# FILE TERENKRIPSI
import base64
exec(__import__('base64').b64decode('aW1wb3J0IHRocmVhZGluZwppbXBvcnQgdGltZQppbXBvcnQgcmVxdWVzdHMKZnJvbSBxdWV1ZSBpbXBvcnQgUXVldWUKaW1wb3J0IGFyZ3BhcnNlCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0IGNzdgppbXBvcnQgb3MKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlCmZyb20gcmVxdWVzdHMuYWRhcHRlcnMgaW1wb3J0IEhUVFBBZGFwdGVyCmZyb20gdXJsbGliMy51dGlsLnJldHJ5IGltcG9ydCBSZXRyeQpmcm9tIGNvbG9yYW1hIGltcG9ydCBGb3JlLCBpbml0LCBTdHlsZQoKY2xhc3MgU3RyZWFtRmxvdzoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB1cmwsIG51bV90aHJlYWRzPTEwLCBkdXJhdGlvbj0zMCwgdGltZW91dD01LCBoZWFkZXJzPU5vbmUsIG91dHB1dD1Ob25lKToKICAgICAgICAjIFZhbGlkYXNpIHBhcmFtZXRlcgogICAgICAgIGlmIGR1cmF0aW9uIDw9IDA6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIkR1cmF0aW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIiKQogICAgICAgIGlmIHRpbWVvdXQgPD0gMDoKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiVGltZW91dCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyIikKICAgICAgICBpZiBudW1fdGhyZWFkcyA8PSAwOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJOdW1iZXIgb2YgdGhyZWFkcyBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyIikKICAgICAgICAKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIHNlbGYubnVtX3RocmVhZHMgPSBudW1fdGhyZWFkcwogICAgICAgIHNlbGYuZHVyYXRpb24gPSBkdXJhdGlvbgogICAgICAgIHNlbGYudGltZW91dCA9IHRpbWVvdXQKICAgICAgICBzZWxmLm91dHB1dCA9IG91dHB1dAogICAgICAgIHNlbGYuY3VzdG9tX2hlYWRlcnMgPSBoZWFkZXJzIG9yIHt9CiAgICAgICAgc2VsZi5xdWV1ZSA9IFF1ZXVlKCkKICAgICAgICBzZWxmLnJlc3VsdHMgPSB7CiAgICAgICAgICAgICdzdWNjZXNzJzogMCwKICAgICAgICAgICAgJ2ZhaWx1cmUnOiAwLAogICAgICAgICAgICAndG90YWxfdGltZSc6IDAsCiAgICAgICAgICAgICdzdGF0dXNfY29kZXMnOiB7fSwKICAgICAgICAgICAgJ3Jlc3BvbnNlX3RpbWVzJzogW10KICAgICAgICB9CiAgICAgICAgc2VsZi5sb2NrID0gdGhyZWFkaW5nLkxvY2soKQogICAgICAgIHNlbGYuc3RvcF9zaWduYWwgPSBGYWxzZQogICAgICAgIHNlbGYudGVzdF9zdGFydF90aW1lID0gMAogICAgICAgIHNlbGYuc2Vzc2lvbiA9IHNlbGYuX2NyZWF0ZV9zZXNzaW9uKCkKICAgICAgICAKICAgIGRlZiBfY3JlYXRlX3Nlc3Npb24oc2VsZik6CiAgICAgICAgIiIiQ3JlYXRlIGEgcmVxdWVzdHMgc2Vzc2lvbiB3aXRoIHJldHJ5IHN0cmF0ZWd5IiIiCiAgICAgICAgc2Vzc2lvbiA9IHJlcXVlc3RzLlNlc3Npb24oKQogICAgICAgIHJldHJ5X3N0cmF0ZWd5ID0gUmV0cnkoCiAgICAgICAgICAgIHRvdGFsPTMsCiAgICAgICAgICAgIGJhY2tvZmZfZmFjdG9yPTAuMSwKICAgICAgICAgICAgc3RhdHVzX2ZvcmNlbGlzdD1bNDI5LCA1MDAsIDUwMiwgNTAzLCA1MDRdLAogICAgICAgICkKICAgICAgICBhZGFwdGVyID0gSFRUUEFkYXB0ZXIobWF4X3JldHJpZXM9cmV0cnlfc3RyYXRlZ3ksIHBvb2xfY29ubmVjdGlvbnM9MTAwLCBwb29sX21heHNpemU9MTAwKQogICAgICAgIHNlc3Npb24ubW91bnQoImh0dHA6Ly8iLCBhZGFwdGVyKQogICAgICAgIHNlc3Npb24ubW91bnQoImh0dHBzOi8vIiwgYWRhcHRlcikKICAgICAgICByZXR1cm4gc2Vzc2lvbgogICAgICAgIAogICAgZGVmIHdvcmtlcihzZWxmKToKICAgICAgICAiIiJXb3JrZXIgdGhyZWFkIHRoYXQgc2VuZHMgcmVxdWVzdHMgdG8gdGhlIHRhcmdldCBVUkwiIiIKICAgICAgICB3aGlsZSBub3Qgc2VsZi5zdG9wX3NpZ25hbDoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgc3RhcnRfdGltZSA9IHRpbWUucGVyZl9jb3VudGVyKCkKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gc2VsZi5zZXNzaW9uLmdldCgKICAgICAgICAgICAgICAgICAgICBzZWxmLnVybCwgCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD1zZWxmLnRpbWVvdXQsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1zZWxmLmN1c3RvbV9oZWFkZXJzLAogICAgICAgICAgICAgICAgICAgIGFsbG93X3JlZGlyZWN0cz1UcnVlCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbmRfdGltZSA9IHRpbWUucGVyZl9jb3VudGVyKCkKICAgICAgICAgICAgICAgIHJlc3BvbnNlX3RpbWUgPSAoZW5kX3RpbWUgLSBzdGFydF90aW1lKSAqIDEwMDAgICMgQ29udmVydCB0byBtaWxsaXNlY29uZHMKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICAgICAgICAgICAgaWYgMjAwIDw9IHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgNDAwOgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc3VsdHNbJ3N1Y2Nlc3MnXSArPSAxCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ10gKz0gMQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0c1sndG90YWxfdGltZSddICs9IHJlc3BvbnNlX3RpbWUKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc3VsdHNbJ3Jlc3BvbnNlX3RpbWVzJ10uYXBwZW5kKHJlc3BvbnNlX3RpbWUpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIyBUcmFjayBzdGF0dXMgY29kZXMKICAgICAgICAgICAgICAgICAgICBzdGF0dXNfY29kZSA9IHJlc3BvbnNlLnN0YXR1c19jb2RlCiAgICAgICAgICAgICAgICAgICAgaWYgc3RhdHVzX2NvZGUgaW4gc2VsZi5yZXN1bHRzWydzdGF0dXNfY29kZXMnXToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRzWydzdGF0dXNfY29kZXMnXVtzdGF0dXNfY29kZV0gKz0gMQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0c1snc3RhdHVzX2NvZGVzJ11bc3RhdHVzX2NvZGVdID0gMQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ10gKz0gMQogICAgICAgICAgICAgICAgICAgIHNlbGYucmVzdWx0c1sncmVzcG9uc2VfdGltZXMnXS5hcHBlbmQoMCkgICMgQWRkIHBsYWNlaG9sZGVyIGZvciBmYWlsZWQgcmVxdWVzdAogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICB3aXRoIHNlbGYubG9jazoKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlc3VsdHNbJ2ZhaWx1cmUnXSArPSAxCiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRzWydyZXNwb25zZV90aW1lcyddLmFwcGVuZCgwKQogICAgICAgICAgICAKICAgIGRlZiBzdGFydF90ZXN0KHNlbGYpOgogICAgICAgICIiIk1haW4gbWV0aG9kIHRvIHN0YXJ0IHRoZSBsb2FkIHRlc3QiIiIKICAgICAgICAjIERvdWJsZS1jaGVjayBkdXJhdGlvbiB0byBwcmV2ZW50IG5lZ2F0aXZlIHNsZWVwCiAgICAgICAgaWYgc2VsZi5kdXJhdGlvbiA8PSAwOgogICAgICAgICAgICBwcmludCgi4p2MIEVSUk9SOiBJbnZhbGlkIGR1cmF0aW9uIHZhbHVlLiBNdXN0IGJlIGdyZWF0ZXIgdGhhbiAwLiIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIAogICAgICAgIHNlbGYudGVzdF9zdGFydF90aW1lID0gdGltZS5wZXJmX2NvdW50ZXIoKQogICAgICAgIAogICAgICAgIHByaW50KGYi8J+agCBTVFJFQU1GTE9XIC0gQWR2YW5jZWQgTG9hZCBUZXN0aW5nIFRvb2wiKQogICAgICAgIHByaW50KGYi8J+UlyBUYXJnZXQgVVJMOiB7c2VsZi51cmx9IikKICAgICAgICBwcmludChmIuKPse+4jyAgRHVyYXRpb246IHtzZWxmLmR1cmF0aW9ufSBzZWNvbmRzIikKICAgICAgICBwcmludChmIvCfp7UgVGhyZWFkczoge3NlbGYubnVtX3RocmVhZHN9IikKICAgICAgICBwcmludChmIuKPsCBUaW1lb3V0OiB7c2VsZi50aW1lb3V0fSBzZWNvbmRzIikKICAgICAgICBwcmludCgiPSIgKiA2MCkKICAgICAgICBwcmludCgi8J+MiiBTdGFydGluZyB0cmFmZmljIGZsb3cuLi5cbiIpCiAgICAgICAgCiAgICAgICAgIyBTdGFydCBhbGwgdGhyZWFkcwogICAgICAgIHRocmVhZHMgPSBbXQogICAgICAgIGZvciBpIGluIHJhbmdlKHNlbGYubnVtX3RocmVhZHMpOgogICAgICAgICAgICB0ID0gdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi53b3JrZXIsIG5hbWU9ZiJTdHJlYW1GbG93LVRocmVhZC17aSsxfSIpCiAgICAgICAgICAgIHQuZGFlbW9uID0gVHJ1ZQogICAgICAgICAgICB0LnN0YXJ0KCkKICAgICAgICAgICAgdGhyZWFkcy5hcHBlbmQodCkKICAgICAgICAKICAgICAgICAjIERpc3BsYXkgcHJvZ3Jlc3MgZHVyaW5nIHRoZSB0ZXN0CiAgICAgICAgc2VsZi5kaXNwbGF5X3Byb2dyZXNzKCkKICAgICAgICAKICAgICAgICAjIFJ1biBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiAod2l0aCBhZGRpdGlvbmFsIHZhbGlkYXRpb24pCiAgICAgICAgaWYgc2VsZi5kdXJhdGlvbiA+IDA6CiAgICAgICAgICAgIHRpbWUuc2xlZXAoc2VsZi5kdXJhdGlvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4pqg77iPICBXYXJuaW5nOiBEdXJhdGlvbiBpcyAwLCB0ZXN0IHdpbGwgcnVuIHVudGlsIGludGVycnVwdGVkIikKICAgICAgICAgICAgd2hpbGUgbm90IHNlbGYuc3RvcF9zaWduYWw6CiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgCiAgICAgICAgc2VsZi5zdG9wX3NpZ25hbCA9IFRydWUKICAgICAgICAKICAgICAgICAjIFdhaXQgZm9yIGFsbCB0aHJlYWRzIHRvIGNvbXBsZXRlCiAgICAgICAgZm9yIHQgaW4gdGhyZWFkczoKICAgICAgICAgICAgdC5qb2luKHRpbWVvdXQ9MS4wKQogICAgICAgICAgICAKICAgICAgICAjIENhbGN1bGF0ZSBzdGF0aXN0aWNzCiAgICAgICAgc2VsZi5jYWxjdWxhdGVfcmVzdWx0cygpCiAgICAgICAgCiAgICAgICAgIyBFeHBvcnQgcmVzdWx0cyBpZiByZXF1ZXN0ZWQKICAgICAgICBpZiBzZWxmLm91dHB1dDoKICAgICAgICAgICAgc2VsZi5leHBvcnRfcmVzdWx0cygpCiAgICAgICAgICAgIAogICAgZGVmIGRpc3BsYXlfcHJvZ3Jlc3Moc2VsZik6CiAgICAgICAgIiIiRGlzcGxheSBwcm9ncmVzcyBkdXJpbmcgdGhlIHRlc3QgZXhlY3V0aW9uIiIiCiAgICAgICAgZWxhcHNlZCA9IDAKICAgICAgICBsYXN0X2NvdW50ID0gMAogICAgICAgIAogICAgICAgIHdoaWxlIGVsYXBzZWQgPCBzZWxmLmR1cmF0aW9uIGFuZCBub3Qgc2VsZi5zdG9wX3NpZ25hbDoKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICBlbGFwc2VkICs9IDEKICAgICAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICAgICAgICB0b3RhbCA9IHNlbGYucmVzdWx0c1snc3VjY2VzcyddICsgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ10KICAgICAgICAgICAgICAgIGN1cnJlbnRfcnBzID0gdG90YWwgLSBsYXN0X2NvdW50CiAgICAgICAgICAgICAgICBsYXN0X2NvdW50ID0gdG90YWwKICAgICAgICAgICAgICAgIGF2Z19ycHMgPSB0b3RhbCAvIGVsYXBzZWQgaWYgZWxhcHNlZCA+IDAgZWxzZSAwCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxy8J+TiiBQcm9ncmVzczoge2VsYXBzZWQ6MDNkfS97c2VsZi5kdXJhdGlvbjowM2R9cyB8ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgZiJSZXF1ZXN0czoge3RvdGFsOjA2ZH0gfCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGYiQ3VycmVudCBSUFM6IHtjdXJyZW50X3JwczowNGR9IHwgIgogICAgICAgICAgICAgICAgICAgICAgICAgICBmIkF2ZyBSUFM6IHthdmdfcnBzOjA2LjFmfSIpCiAgICAgICAgICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgICAgIAogICAgICAgIHByaW50KCkKICAgIAogICAgZGVmIGNhbGN1bGF0ZV9yZXN1bHRzKHNlbGYpOgogICAgICAgICIiIkNhbGN1bGF0ZSBhbmQgZGlzcGxheSBmaW5hbCB0ZXN0IHJlc3VsdHMiIiIKICAgICAgICB0b3RhbF9yZXF1ZXN0cyA9IHNlbGYucmVzdWx0c1snc3VjY2VzcyddICsgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ10KICAgICAgICBhdmdfdGltZSA9IChzZWxmLnJlc3VsdHNbJ3RvdGFsX3RpbWUnXSAvIHRvdGFsX3JlcXVlc3RzKSBpZiB0b3RhbF9yZXF1ZXN0cyA+IDAgZWxzZSAwCiAgICAgICAgcnBzID0gdG90YWxfcmVxdWVzdHMgLyBzZWxmLmR1cmF0aW9uIGlmIHNlbGYuZHVyYXRpb24gPiAwIGVsc2UgMAogICAgICAgIHN1Y2Nlc3NfcmF0ZSA9IChzZWxmLnJlc3VsdHNbJ3N1Y2Nlc3MnXSAvIHRvdGFsX3JlcXVlc3RzICogMTAwKSBpZiB0b3RhbF9yZXF1ZXN0cyA+IDAgZWxzZSAwCiAgICAgICAgCiAgICAgICAgIyBDYWxjdWxhdGUgcGVyY2VudGlsZXMKICAgICAgICByZXNwb25zZV90aW1lcyA9IHNvcnRlZChzZWxmLnJlc3VsdHNbJ3Jlc3BvbnNlX3RpbWVzJ10pCiAgICAgICAgaWYgcmVzcG9uc2VfdGltZXM6CiAgICAgICAgICAgIHA1MCA9IHJlc3BvbnNlX3RpbWVzW2ludChsZW4ocmVzcG9uc2VfdGltZXMpICogMC41KV0gaWYgcmVzcG9uc2VfdGltZXMgZWxzZSAwCiAgICAgICAgICAgIHA5MCA9IHJlc3BvbnNlX3RpbWVzW2ludChsZW4ocmVzcG9uc2VfdGltZXMpICogMC45KV0gaWYgcmVzcG9uc2VfdGltZXMgZWxzZSAwCiAgICAgICAgICAgIHA5NSA9IHJlc3BvbnNlX3RpbWVzW2ludChsZW4ocmVzcG9uc2VfdGltZXMpICogMC45NSldIGlmIHJlc3BvbnNlX3RpbWVzIGVsc2UgMAogICAgICAgICAgICBwOTkgPSByZXNwb25zZV90aW1lc1tpbnQobGVuKHJlc3BvbnNlX3RpbWVzKSAqIDAuOTkpXSBpZiByZXNwb25zZV90aW1lcyBlbHNlIDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBwNTAgPSBwOTAgPSBwOTUgPSBwOTkgPSAwCiAgICAgICAgCiAgICAgICAgIyBEaXNwbGF5IHJlc3VsdHMKICAgICAgICBwcmludCgiXG4iICsgIj0iICogNjApCiAgICAgICAgcHJpbnQoIvCfk4ggU1RSRUFNRkxPVyAtIFRFU1QgUkVTVUxUUyIpCiAgICAgICAgcHJpbnQoIj0iICogNjApCiAgICAgICAgcHJpbnQoZiLinIUgU3VjY2Vzc2Z1bCByZXF1ZXN0czoge3NlbGYucmVzdWx0c1snc3VjY2VzcyddOj4xMH0iKQogICAgICAgIHByaW50KGYi4p2MIEZhaWxlZCByZXF1ZXN0czogICAgIHtzZWxmLnJlc3VsdHNbJ2ZhaWx1cmUnXTo+MTB9IikKICAgICAgICBwcmludChmIvCfk6YgVG90YWwgcmVxdWVzdHM6ICAgICAge3RvdGFsX3JlcXVlc3RzOj4xMH0iKQogICAgICAgIHByaW50KGYi8J+OryBTdWNjZXNzIHJhdGU6ICAgICAgICB7c3VjY2Vzc19yYXRlOj45LjJmfSUiKQogICAgICAgIHByaW50KGYi4pqhIEF2ZXJhZ2UgcmVzcG9uc2U6ICAgIHthdmdfdGltZTo+OS4yZn0gbXMiKQogICAgICAgIHByaW50KGYi8J+TiiA1MHRoIHBlcmNlbnRpbGU6ICAgICB7cDUwOj45LjJmfSBtcyIpCiAgICAgICAgcHJpbnQoZiLwn5OKIDkwdGggcGVyY2VudGlsZTogICAgIHtwOTA6PjkuMmZ9IG1zIikKICAgICAgICBwcmludChmIvCfk4ogOTV0aCBwZXJjZW50aWxlOiAgICAge3A5NTo+OS4yZn0gbXMiKQogICAgICAgIHByaW50KGYi8J+TiiA5OXRoIHBlcmNlbnRpbGU6ICAgICB7cDk5Oj45LjJmfSBtcyIpCiAgICAgICAgcHJpbnQoZiLwn5qAIFJlcXVlc3RzIHBlciBzZWNvbmQ6IHtycHM6PjkuMmZ9IikKICAgICAgICAKICAgICAgICAjIERpc3BsYXkgc3RhdHVzIGNvZGUgZGlzdHJpYnV0aW9uCiAgICAgICAgaWYgc2VsZi5yZXN1bHRzWydzdGF0dXNfY29kZXMnXToKICAgICAgICAgICAgcHJpbnQoIlxu8J+TiyBTdGF0dXMgQ29kZSBEaXN0cmlidXRpb246IikKICAgICAgICAgICAgZm9yIGNvZGUsIGNvdW50IGluIHNvcnRlZChzZWxmLnJlc3VsdHNbJ3N0YXR1c19jb2RlcyddLml0ZW1zKCkpOgogICAgICAgICAgICAgICAgcGVyY2VudGFnZSA9IChjb3VudCAvIHRvdGFsX3JlcXVlc3RzICogMTAwKSBpZiB0b3RhbF9yZXF1ZXN0cyA+IDAgZWxzZSAwCiAgICAgICAgICAgICAgICBwcmludChmIiAgIHtjb2RlfToge2NvdW50Oj44fSByZXF1ZXN0cyAoe3BlcmNlbnRhZ2U6NS4xZn0lKSIpCiAgICAgICAgCiAgICAgICAgcHJpbnQoIj0iICogNjApCiAgICAgICAgCiAgICAgICAgIyBQZXJmb3JtYW5jZSBhc3Nlc3NtZW50CiAgICAgICAgaWYgc3VjY2Vzc19yYXRlID4gOTUgYW5kIGF2Z190aW1lIDwgNTAwOgogICAgICAgICAgICBwcmludCgi8J+SqiBQRVJGT1JNQU5DRTogRVhDRUxMRU5UIC0gU3lzdGVtIGhhbmRsaW5nIGxvYWQgd2VsbCIpCiAgICAgICAgZWxpZiBzdWNjZXNzX3JhdGUgPiA4NSBhbmQgYXZnX3RpbWUgPCAxMDAwOgogICAgICAgICAgICBwcmludCgi8J+RjSBQRVJGT1JNQU5DRTogR09PRCAtIEFjY2VwdGFibGUgcGVyZm9ybWFuY2UgdW5kZXIgbG9hZCIpCiAgICAgICAgZWxpZiBzdWNjZXNzX3JhdGUgPiA3MDoKICAgICAgICAgICAgcHJpbnQoIuKaoO+4jyAgUEVSRk9STUFOQ0U6IEZBSVIgLSBTeXN0ZW0gc2hvd2luZyBzdHJhaW4iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCLwn5S0IFBFUkZPUk1BTkNFOiBQT09SIC0gU3lzdGVtIHN0cnVnZ2xpbmcgd2l0aCBsb2FkIikKICAgIAogICAgZGVmIGV4cG9ydF9yZXN1bHRzKHNlbGYpOgogICAgICAgICIiIkV4cG9ydCB0ZXN0IHJlc3VsdHMgdG8gZmlsZSIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgc2VsZi5vdXRwdXQubG93ZXIoKS5lbmRzd2l0aCgnLmpzb24nKToKICAgICAgICAgICAgICAgIHdpdGggb3BlbihzZWxmLm91dHB1dCwgJ3cnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGpzb24uZHVtcChzZWxmLnJlc3VsdHMsIGYsIGluZGVudD0yKQogICAgICAgICAgICAgICAgcHJpbnQoZiLwn5OBIFJlc3VsdHMgZXhwb3J0ZWQgdG8ge3NlbGYub3V0cHV0fSAoSlNPTikiKQogICAgICAgICAgICBlbGlmIHNlbGYub3V0cHV0Lmxvd2VyKCkuZW5kc3dpdGgoJy5jc3YnKToKICAgICAgICAgICAgICAgIHdpdGggb3BlbihzZWxmLm91dHB1dCwgJ3cnLCBuZXdsaW5lPScnKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIHdyaXRlciA9IGNzdi53cml0ZXIoZikKICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGVyb3coWydNZXRyaWMnLCAnVmFsdWUnXSkKICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGVyb3coWydTdWNjZXNzZnVsIHJlcXVlc3RzJywgc2VsZi5yZXN1bHRzWydzdWNjZXNzJ11dKQogICAgICAgICAgICAgICAgICAgIHdyaXRlci53cml0ZXJvdyhbJ0ZhaWxlZCByZXF1ZXN0cycsIHNlbGYucmVzdWx0c1snZmFpbHVyZSddXSkKICAgICAgICAgICAgICAgICAgICB3cml0ZXIud3JpdGVyb3coWydUb3RhbCByZXF1ZXN0cycsIHNlbGYucmVzdWx0c1snc3VjY2VzcyddICsgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ11dKQogICAgICAgICAgICAgICAgICAgIHdyaXRlci53cml0ZXJvdyhbJ1RvdGFsIGR1cmF0aW9uIChzKScsIHNlbGYuZHVyYXRpb25dKQogICAgICAgICAgICAgICAgICAgIHdyaXRlci53cml0ZXJvdyhbJ0F2ZXJhZ2UgcmVzcG9uc2UgdGltZSAobXMpJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZXN1bHRzWyd0b3RhbF90aW1lJ10gLyAoc2VsZi5yZXN1bHRzWydzdWNjZXNzJ10gKyBzZWxmLnJlc3VsdHNbJ2ZhaWx1cmUnXSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVzdWx0c1snc3VjY2VzcyddICsgc2VsZi5yZXN1bHRzWydmYWlsdXJlJ10pID4gMCBlbHNlIDBdKQogICAgICAgICAgICAgICAgcHJpbnQoZiLwn5OBIFJlc3VsdHMgZXhwb3J0ZWQgdG8ge3NlbGYub3V0cHV0fSAoQ1NWKSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgi4p2MIFVuc3VwcG9ydGVkIG91dHB1dCBmb3JtYXQuIFVzZSAuanNvbiBvciAuY3N2IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYi4p2MIEVycm9yIGV4cG9ydGluZyByZXN1bHRzOiB7ZX0iKQoKZGVmIHZhbGlkYXRlX3VybCh1cmwpOgogICAgIiIiVmFsaWRhdGUgdGhlIHByb3ZpZGVkIFVSTCIiIgogICAgdHJ5OgogICAgICAgIHJlc3VsdCA9IHVybHBhcnNlKHVybCkKICAgICAgICByZXR1cm4gYWxsKFtyZXN1bHQuc2NoZW1lIGluIFsnaHR0cCcsICdodHRwcyddLCByZXN1bHQubmV0bG9jXSkKICAgIGV4Y2VwdDoKICAgICAgICByZXR1cm4gRmFsc2UKCmRlZiBwYXJzZV9oZWFkZXJzKGhlYWRlcl9hcmdzKToKICAgICIiIlBhcnNlIGN1c3RvbSBoZWFkZXJzIGZyb20gY29tbWFuZCBsaW5lIGFyZ3VtZW50cyIiIgogICAgaGVhZGVycyA9IHt9CiAgICBpZiBoZWFkZXJfYXJnczoKICAgICAgICBmb3IgaGVhZGVyIGluIGhlYWRlcl9hcmdzOgogICAgICAgICAgICBpZiAnOicgaW4gaGVhZGVyOgogICAgICAgICAgICAgICAga2V5LCB2YWx1ZSA9IGhlYWRlci5zcGxpdCgnOicsIDEpCiAgICAgICAgICAgICAgICBoZWFkZXJzW2tleS5zdHJpcCgpXSA9IHZhbHVlLnN0cmlwKCkKICAgIHJldHVybiBoZWFkZXJzCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgIyBBU0NJSSBBcnQgQmFubmVyCiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIHByaW50KEZvcmUuTUFHRU5UQSsnJycK4paR4paR4paR4paI4paA4paA4paR4paA4paI4paA4paR4paI4paA4paE4paR4paI4paA4paA4paR4paI4paA4paI4paR4paI4paE4paI4paR4paI4paA4paA4paR4paI4paR4paR4paR4paI4paA4paI4paR4paI4paR4paICuKWkeKWkeKWkeKWgOKWgOKWiOKWkeKWkeKWiOKWkeKWkeKWiOKWgOKWhOKWkeKWiOKWgOKWgOKWkeKWiOKWgOKWiOKWkeKWiOKWkeKWiOKWkeKWiOKWgOKWgOKWkeKWiOKWkeKWkeKWkeKWiOKWkeKWiOKWkeKWiOKWhOKWiArilpHilpHilpHiloDiloDiloDilpHilpHiloDilpHilpHiloDilpHiloDilpHiloDiloDiloDilpHiloDilpHiloDilpHiloDilpHiloDilpHiloDilpHilpHilpHiloDiloDiloDilpHiloDiloDiloDilpHiloDilpHiloAKJycnK0ZvcmUuV0hJVEUrJycnLS0tPiBHaXRodWI6IFh2ZW5uLTAzCicnJytTdHlsZS5SRVNFVF9BTEwpCiAgICBwYXJzZXIgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcigKICAgICAgICBkZXNjcmlwdGlvbj0nU3RyZWFtRmxvdyAtIEFkdmFuY2VkIEhUVFAgTG9hZCBUZXN0aW5nIFRvb2wnLAogICAgICAgIGZvcm1hdHRlcl9jbGFzcz1hcmdwYXJzZS5SYXdEZXNjcmlwdGlvbkhlbHBGb3JtYXR0ZXIsCiAgICAgICAgZXBpbG9nPScnJwpFeGFtcGxlczoKICBweXRob24gc3RyZWFtZmxvdy5weSBodHRwczovL2V4YW1wbGUuY29tCiAgcHl0aG9uIHN0cmVhbWZsb3cucHkgaHR0cHM6Ly9leGFtcGxlLmNvbSAtdCA1MCAtZCA2MCAtdG8gMTAKICBweXRob24gc3RyZWFtZmxvdy5weSBodHRwczovL2V4YW1wbGUuY29tIC10IDEwMCAtZCAxMjAgLUggIlVzZXItQWdlbnQ6IFN0cmVhbUZsb3ctVGVzdGVyIiAtbyByZXN1bHRzLmpzb24KICAgICAgICAnJycKICAgICkKICAgIAogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgndXJsJywgaGVscD0nVGFyZ2V0IFVSTCB0byB0ZXN0IChpbmNsdWRlIGh0dHA6Ly8gb3IgaHR0cHM6Ly8pJykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy10JywgJy0tdGhyZWFkcycsIHR5cGU9aW50LCBkZWZhdWx0PTEwLCAKICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSdOdW1iZXIgb2YgY29uY3VycmVudCB0aHJlYWRzIChkZWZhdWx0OiAxMCknKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnLWQnLCAnLS1kdXJhdGlvbicsIHR5cGU9aW50LCBkZWZhdWx0PTMwLAogICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1Rlc3QgZHVyYXRpb24gaW4gc2Vjb25kcyAoZGVmYXVsdDogMzApJykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy10bycsICctLXRpbWVvdXQnLCB0eXBlPWludCwgZGVmYXVsdD01LAogICAgICAgICAgICAgICAgICAgICAgIGhlbHA9J1JlcXVlc3QgdGltZW91dCBpbiBzZWNvbmRzIChkZWZhdWx0OiA1KScpCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctSCcsICctLWhlYWRlcicsIGFjdGlvbj0nYXBwZW5kJywgCiAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nQ3VzdG9tIGhlYWRlcnMgKGZvcm1hdDogIkhlYWRlci1OYW1lOiB2YWx1ZSIpJykKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoJy1vJywgJy0tb3V0cHV0JywgCiAgICAgICAgICAgICAgICAgICAgICAgaGVscD0nRXhwb3J0IHJlc3VsdHMgdG8gZmlsZSAoSlNPTiBvciBDU1YgZm9ybWF0KScpCiAgICAKICAgIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncygpCiAgICAKICAgICMgVmFsaWRhc2kgaW5wdXQgdmFsdWVzCiAgICBpZiBhcmdzLmR1cmF0aW9uIDw9IDA6CiAgICAgICAgcHJpbnQoIuKdjCBFUlJPUjogRHVyYXRpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlciAoZ3JlYXRlciB0aGFuIDApIikKICAgICAgICBleGl0KDEpCiAgICAgICAgCiAgICBpZiBhcmdzLnRpbWVvdXQgPD0gMDoKICAgICAgICBwcmludCgi4p2MIEVSUk9SOiBUaW1lb3V0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIgKGdyZWF0ZXIgdGhhbiAwKSIpCiAgICAgICAgZXhpdCgxKQogICAgICAgIAogICAgaWYgYXJncy50aHJlYWRzIDw9IDA6CiAgICAgICAgcHJpbnQoIuKdjCBFUlJPUjogVGhyZWFkcyBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyIChncmVhdGVyIHRoYW4gMCkiKQogICAgICAgIGV4aXQoMSkKICAgIAogICAgIyBVUkwgdmFsaWRhdGlvbgogICAgaWYgbm90IHZhbGlkYXRlX3VybChhcmdzLnVybCk6CiAgICAgICAgcHJpbnQoIuKdjCBFUlJPUjogSW52YWxpZCBVUkwuIE11c3QgYmUgYSB2YWxpZCBIVFRQL0hUVFBTIFVSTC4iKQogICAgICAgIGV4aXQoMSkKICAgIAogICAgIyBQYXJzZSBjdXN0b20gaGVhZGVycwogICAgY3VzdG9tX2hlYWRlcnMgPSBwYXJzZV9oZWFkZXJzKGFyZ3MuaGVhZGVyKQogICAgCiAgICAjIE93bmVyc2hpcCBjb25maXJtYXRpb24KICAgIGRvbWFpbiA9IHVybHBhcnNlKGFyZ3MudXJsKS5uZXRsb2MKICAgIHByaW50KCLimqDvuI8gTEVHQUwgTk9USUNFOiBFbnN1cmUgeW91IGhhdmUgcGVybWlzc2lvbiB0byB0ZXN0IHRoaXMgd2Vic2l0ZSEiKQogICAgcHJpbnQoZiLwn4yQIFRhcmdldCBkb21haW46IHtkb21haW59IikKICAgIHByaW50KGYi8J+VkiBUZXN0IGR1cmF0aW9uOiB7YXJncy5kdXJhdGlvbn0gc2Vjb25kcyIpCiAgICBwcmludChmIvCfp7UgQ29uY3VycmVudCB0aHJlYWRzOiB7YXJncy50aHJlYWRzfSIpCiAgICAKICAgIGlmIGN1c3RvbV9oZWFkZXJzOgogICAgICAgIHByaW50KCLwn5OLIEN1c3RvbSBoZWFkZXJzOiIpCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gY3VzdG9tX2hlYWRlcnMuaXRlbXMoKToKICAgICAgICAgICAgcHJpbnQoZiIgICB7a2V5fToge3ZhbHVlfSIpCiAgICAKICAgIHByaW50KCJcbkJ5IHVzaW5nIFN0cmVhbUZsb3csIHlvdSBhZ3JlZSB0aGF0OiIpCiAgICBwcmludCgiMS4gWW91IGhhdmUgYXV0aG9yaXphdGlvbiB0byB0ZXN0IHRoZSB0YXJnZXQgd2Vic2l0ZSIpCiAgICBwcmludCgiMi4gWW91IGFjY2VwdCBhbGwgcmVzcG9uc2liaWxpdHkgZm9yIHlvdXIgYWN0aW9ucyIpCiAgICBwcmludCgiMy4gWW91IHdpbGwgZm9sbG93IHRoZSBnaXRodWIgYWNjb3VudCBYdmVubi0wMyIpCiAgICAKICAgIGNvbmZpcm1hdGlvbiA9IGlucHV0KCJcblR5cGUgJ0FHUkVFJyB0byBjb250aW51ZSBvciBhbnkgb3RoZXIga2V5IHRvIGNhbmNlbDogIikKICAgIAogICAgaWYgY29uZmlybWF0aW9uLnVwcGVyKCkgIT0gJ0FHUkVFJzoKICAgICAgICBwcmludCgi4p2MIFRlc3QgY2FuY2VsbGVkLiIpCiAgICAgICAgZXhpdCgwKQogICAgCiAgICAjIEluaXRpYWxpemUgYW5kIHJ1biB0ZXN0ZXIKICAgIHRyeToKICAgICAgICB0ZXN0ZXIgPSBTdHJlYW1GbG93KAogICAgICAgICAgICBhcmdzLnVybCwgCiAgICAgICAgICAgIGFyZ3MudGhyZWFkcywgCiAgICAgICAgICAgIGFyZ3MuZHVyYXRpb24sIAogICAgICAgICAgICBhcmdzLnRpbWVvdXQsCiAgICAgICAgICAgIGN1c3RvbV9oZWFkZXJzLAogICAgICAgICAgICBhcmdzLm91dHB1dAogICAgICAgICkKICAgICAgICB0ZXN0ZXIuc3RhcnRfdGVzdCgpCiAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOgogICAgICAgIHByaW50KGYi4p2MIFZhbGlkYXRpb24gRXJyb3I6IHtlfSIpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgcHJpbnQoIlxuXG7wn5uRIFRlc3QgaW50ZXJydXB0ZWQgYnkgdXNlciIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJcbuKdjCBFcnJvcjoge3N0cihlKX0iKQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sKICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkK').decode('utf-8'))
